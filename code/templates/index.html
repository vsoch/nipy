{% extends "base.html" %}
{% block head %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
<script src="{{ url_for('static',filename='js/tipsy.js') }}"></script>
{% endblock %}
{% block content %}

<div id="brain"></div>
<svg style="background-color:transparent;width:200px;height:200px"><g
     id="g3000"
     transform="matrix(2.3814282,0,0,2.3814282,-448.0488,-122.25947)"><path
       d="m 304.11403,91.168955 c 4.48476,-0.73388 7.71748,-2.03202 11.71602,-4.17942 -4.16636,-2.55036 -7.29585,1.58152 -11.58739,0.12283 -1.43638,-0.48823 -3.7498,-2.37238 -4.76363,-3.44173 -1.2994,-1.37052 0.44414,-1.44672 -2.33591,-2.39469 -1.32879,-0.45322 -1.84514,-1.1392 -1.52637,-2.76808 -4.23276,0.78214 -14.6492,4.05224 -13.90461,10.2029 0.77434,6.39722 12.39856,5.28541 16.22202,3.9334"
       class="st8"
       id="temporal_x5F_lobe_1_"
       inkscape:connector-curvature="0"
       style="fill:#009444" /><path
       d="m 310.24654,99.457585 c 3.4606,1.745545 6.94913,0.42835 9.99207,-1.29487 1.48192,-0.83929 5.93694,-8.15854 4.4454,-9.68854 -2.73651,-2.80763 -9.6733,0.15494 -12.38368,1.58679 -3.41978,1.8065 -7.81637,1.98484 -11.53151,2.93082 0.71991,2.42281 3.92524,3.50849 6.02493,4.59653"
       class="st5"
       id="cerebellum_1_"
       inkscape:connector-curvature="0"
       style="fill:#c49a6c" /><path
       d="m 296.93466,78.520015 c 3.1596,-1.27073 5.62687,-2.15175 8.22495,-4.04588 1.37016,-0.99896 2.31359,-2.34861 4.13352,-1.71815 1.22882,0.42564 3.20205,1.69129 2.19748,3.23037 -1.51277,2.31722 -14.38776,8.67997 -14.55595,2.53366 l 0,0 z"
       class="st3"
       id="auditory_1_"
       inkscape:connector-curvature="0"
       style="fill:#f7941e" /><path
       d="m 299.06265,75.082825 c 0.0775,-1.49425 0.87595,-3.21149 2.25989,-3.90346 2.42663,-1.21341 2.69726,-2.35272 4.3949,-4.07214 3.07415,-3.11333 6.26121,-1.54094 8.13683,1.98841 0.74205,1.39629 4.18396,7.30601 3.16959,9.68492 -1.12759,2.64488 -8.80335,1.58678 -4.42399,6.20418 -2.44187,0.78958 -4.73696,2.07447 -7.37422,1.37088 -1.75733,-0.46881 -5.59784,-3.03568 -5.08911,-4.98533 3.441,0.55536 14.73483,-2.35315 12.13276,-7.9606 -1.50206,-3.23671 -4.7297,-1.57736 -6.41427,-0.20865 -2.27441,1.84805 -3.79171,2.37673 -6.40394,3.5544 -0.12264,-0.52887 -0.38935,-1.13303 -0.38844,-1.67261 z"
       class="st10"
       id="wernickes_1_"
       inkscape:connector-curvature="0"
       style="fill:#da1c5c"
       sodipodi:nodetypes="cccsccscccccc" /><path
       d="m 318.12096,86.874505 c 2.4201,-0.0963 6.89017,0.36667 8.88372,-1.06517 2.36803,-1.70073 1.59804,-6.18423 0.6497,-8.56858 -1.89431,-4.7629 -4.81515,-10.07063 -10.02654,-12.16306 0.209,1.2662 0.11085,2.58429 -0.50347,3.72022 -1.07933,1.99609 -1.27908,1.02653 -0.65768,3.63186 0.44033,1.84623 2.89036,4.60306 2.17552,6.58101 -1.00639,2.78513 -5.5748,0.88593 -5.35926,3.8465 0.19232,2.63999 2.69623,3.25177 4.83801,4.01722 l 0,0 z"
       class="st0"
       id="occipital_1_"
       inkscape:connector-curvature="0"
       style="fill:#1c75bc" /><path
       d="m 306.55027,65.535625 c 3.27644,-2.26371 7.14997,0.23241 7.51537,3.09519 1.44219,-0.27087 2.86188,-1.68367 2.8822,-2.95658 0.0297,-1.8602 -1.9277,-2.47688 -3.69972,-3.38676 -1.01819,-0.52288 -3.39528,-2.50668 -3.95499,-1.16809 -0.60126,1.43874 -2.45294,2.53916 -2.75339,4.10272"
       class="st6"
       id="somatosensory_x5F_area_2_"
       inkscape:connector-curvature="0"
       style="fill:#2b3990"
       sodipodi:nodetypes="cccccc" /><path
       d="m 294.55333,71.309175 c 0.21445,-2.71492 2.35641,-1.92061 3.26556,-3.52337 1.19689,-2.10985 -0.92457,-3.44172 1.75334,-5.55067 1.04635,-0.82399 3.13341,-4.74276 4.28622,-4.2772 1.95043,0.78768 2.33521,0.90669 5.0374,2.40673 -2.89707,2.81325 -4.75739,7.63178 -8.06922,10.34307 -1.90828,1.5623 -3.37713,2.62076 -2.72671,5.42022 0.24693,1.06246 -4.2783,1.60493 -5.26528,1.74046 0.11975,-1.61073 2.38327,-1.47829 2.38327,-3.03587 -1.8e-4,-1.32008 0.009,-2.38163 -0.66458,-3.52337 z"
       class="st9"
       id="sensory_x5F_cortex_1_"
       inkscape:connector-curvature="0"
       style="fill:#00aeef"
       sodipodi:nodetypes="cccscccccc" /><path
       d="m 296.55423,56.842665 c 0.45228,-0.37746 2.2169,0.16962 2.94414,0.69912 0.67553,-0.0931 2.66976,-0.93847 2.75938,0.23829 0.0617,0.80972 -3.71913,3.57211 -4.41945,4.12365 -2.3047,1.81503 0.003,3.3238 -1.01129,5.19833 -0.87921,1.62507 -2.97908,1.17857 -3.44717,3.71932 -0.38264,2.07737 1.84067,4.00252 -0.88169,5.74733 -0.9285,1.59997 -2.07483,1.68295 -4.14585,2.70549 0,-4.78703 0.59557,-7.8018 2.48752,-12.23577"
       class="st4"
       id="motor_x5F_cortex_1_"
       inkscape:connector-curvature="0"
       style="fill:#f9ed32"
       sodipodi:nodetypes="ccccscccc" /><path
       d="m 277.42368,77.531225 c 1.05973,-1.02562 1.99289,-1.59743 4.38842,-1.64901 2.101,-3.41553 2.15485,-3.1656 3.64185,-4.43107 2.82051,-2.4005 1.65029,5.80848 1.72032,7.12657 0.11358,2.13597 -3.79497,5.50531 -6.09659,3.9178 -0.53232,-0.36703 -0.56915,-2.67682 -1.23717,-3.3111 -1.06373,-1.00984 -2.54274,-0.47027 -2.41683,-1.65319 z"
       class="st2"
       id="brocas_1_"
       inkscape:connector-curvature="0"
       style="fill:#be1e2d"
       sodipodi:nodetypes="cccccccc" /><path
       d="m 287.98751,70.726065 c -3.14965,-3.0073 -6.11312,4.94925 -8.58825,4.43313 0.71873,-1.85571 1.32106,-3.6827 0.16256,-5.36998 -0.88917,-1.29495 -4.04222,-1.41049 -4.55706,-2.64876 -1.49009,-3.58268 5.15994,-5.31533 7.66612,-6.604 2.91071,-1.49665 7.43243,-3.64725 10.81731,-3.83924 0.80051,-0.0454 1.60797,-0.20073 1.35936,0.7773 -0.58433,2.29872 -3.29003,6.7939 -3.53325,6.78501"
       class="st7"
       id="cerebral_x5F_cortex_2_"
       inkscape:connector-curvature="0"
       style="fill:#662d91"
       sodipodi:nodetypes="ccccscsc" /><path
       d="m 265.90669,80.141825 c 0.69034,-2.96148 1.1929,-5.14499 2.33482,-7.75668 1.403,-3.20895 2.34861,-3.86754 5.1722,-6.29689 0.2433,1.97577 2.29582,2.97781 4.25399,3.92977 1.67007,0.8119 2.12491,4.99695 0.22661,5.90863 -3.61263,1.7352 -1.17095,1.56883 0.37665,3.14201 1.57481,1.60094 1.05302,4.26415 3.58469,4.65295 -2.02106,3.19533 -0.31262,6.79914 -1.04269,6.85339 -2.28802,0.16982 -6.53074,-0.52366 -8.68885,-1.42845 -0.99551,-0.41729 -2.07428,-0.6875 -3.02225,-1.11713 -0.92929,-0.4211 -0.94363,-0.31018 -1.87962,-1.19647 -1.08387,-1.0258 -2.20111,-5.00619 -1.31555,-6.69113 z"
       class="st1"
       id="frontal_1_"
       inkscape:connector-curvature="0"
       style="fill:#ef4136"
       sodipodi:nodetypes="cccscccccccc" /></g></svg>
<script>

// Tooltips
var tip = d3.tip()
    .attr('class', 'd3-tip')
    .offset([-10, 0])
    .html(function(d) {
        return "<strong>Example: </strong><span style='color:tomato'>" + d.example + "</span><br><strong>Lemmas: </strong><span style='color:yellow'>" + d.lemmanames + "</span><br><strong>LexName: </strong><span style='color:orange'>" + d.lexname + "</span><br><strong>Part of Speech: </strong><span style='color:cornflowerBlue'>" + d.pos + "</span><br><strong>Similar Words:</strong><span style='color:blue'> " + d.similartos + "</span>";
})


// D3

var width = 960,
    height = 500,
    padding = 1.5, // separation between same-color circles
    clusterPadding = 6, // separation between different-color circles
    maxRadius = 12;

var n = 200, // total number of circles
    m = 10; // number of distinct clusters

var color = d3.scale.category10()
    .domain(d3.range(m));

// The largest node for each cluster.
var clusters = new Array(m);

var nodes = d3.range(n).map(function() {
  var i = Math.floor(Math.random() * m),
      r = Math.sqrt((i + 1) / m * -Math.log(Math.random())) * maxRadius,
      d = {cluster: i, radius: r};
  if (!clusters[i] || (r > clusters[i].radius)) clusters[i] = d;
  return d;
});

var force = d3.layout.force()
    .nodes(nodes)
    .size([width, height])
    .gravity(0)
    .charge(0)
    .on("tick", tick)
    .start();

var svg = d3.select("#brain").append("svg")
    .attr("width", width)
    .attr("height", height)
    .style("background-color","transparent")

// Call tooltips function
//svg.call(tip);

var circle = svg.selectAll("circle")
    .data(nodes)
  .enter().append("circle")
    .attr("r", function(d) { return d.radius; })
    .style("fill", function(d) { return color(d.cluster); })
    .call(force.drag);

function tick(e) {
  circle
      .each(cluster(10 * e.alpha * e.alpha))
      .each(collide(.5))
      .attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; });
}

// Move d to be adjacent to the cluster node.
function cluster(alpha) {
  return function(d) {
    var cluster = clusters[d.cluster],
        k = 1;

    // For cluster nodes, apply custom gravity.
    if (cluster === d) {
      cluster = {x: width / 2, y: height / 2, radius: -d.radius};
      k = .1 * Math.sqrt(d.radius);
    }

    var x = d.x - cluster.x,
        y = d.y - cluster.y,
        l = Math.sqrt(x * x + y * y),
        r = d.radius + cluster.radius;
    if (l != r) {
      l = (l - r) / l * alpha * k;
      d.x -= x *= l;
      d.y -= y *= l;
      cluster.x += x;
      cluster.y += y;
    }
  };
}

// Resolves collisions between d and all other circles.
function collide(alpha) {
  var quadtree = d3.geom.quadtree(nodes);
  return function(d) {
    var r = d.radius + maxRadius + Math.max(padding, clusterPadding),
        nx1 = d.x - r,
        nx2 = d.x + r,
        ny1 = d.y - r,
        ny2 = d.y + r;
    quadtree.visit(function(quad, x1, y1, x2, y2) {
      if (quad.point && (quad.point !== d)) {
        var x = d.x - quad.point.x,
            y = d.y - quad.point.y,
            l = Math.sqrt(x * x + y * y),
            r = d.radius + quad.point.radius + (d.cluster === quad.point.cluster ? padding : clusterPadding);
        if (l < r) {
          l = (l - r) / l * alpha;
          d.x -= x *= l;
          d.y -= y *= l;
          quad.point.x += x;
          quad.point.y += y;
        }
      }
      return x1 > nx2 || x2 < nx1 || y1 > ny2 || y2 < ny1;
    });
  };
}    
</script>    


{% endblock %}
